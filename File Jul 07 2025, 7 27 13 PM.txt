ğŸ› ï¸ Pickup G-code Template & Safety Design â€“ cncpick2

This document outlines the structure of the pickup sequence used by motion agents to generate safe and synchronized G-code for physical or simulated CNC arms.

â¸»

ğŸ”§ Purpose
	â€¢	Define safe pickup motions using vacuum gripper
	â€¢	Sync with conveyor movement
	â€¢	Include Z-safe heights and vacuum control

â¸»

ğŸ“„ G-code Template

G90 ; absolute positioning
G0 X{pickup_x} Y{pickup_y} Z{safe_z} ; move above object
G1 Z{pickup_z} F500 ; lower to object height
M8 ; vacuum ON
G4 P0.5 ; small delay to ensure grip
G1 Z{safe_z} F500 ; lift object
G0 X{drop_x} Y{drop_y} ; move to bin
G1 Z{drop_z} ; lower to drop point
M9 ; vacuum OFF
G1 Z{safe_z} ; lift after drop
G0 X{home_x} Y{home_y} ; return to ready position


â¸»

ğŸ“ Parameters Injected

Placeholder	Source	Description
{pickup_x}	lane mapper	CNC-space X of target object
{pickup_y}	lane center	Y-lane center
{pickup_z}	vision height	Z-depth (compensated)
{drop_x}	config	Bin location
{safe_z}	config	Z height above objects
{home_x/y}	config	Central resting position


â¸»

âš ï¸ Safety Rules
	â€¢	Always return to safe Z before XY moves
	â€¢	Never move laterally while at pickup Z
	â€¢	Only perform vacuum ON below safe_z
	â€¢	All speeds capped in config

â¸»

ğŸ§  Agent Use
	â€¢	motion_agent injects coordinates at runtime
	â€¢	Fills in config parameters and object height from metadata
	â€¢	Sends line-by-line G-code to GRBL or grbl_driver_agent

â¸»

ğŸ§ª Simulation Mode
	â€¢	Pickup coordinates printed/logged for verification
	â€¢	grbl_driver_agent simulates delay and confirms move
	â€¢	Vacuum ON/OFF logged as simulated events

â¸»

ğŸ“Œ Summary

This G-code plan allows real or simulated pickup of vision-targeted objects using safety-first motion routines and parameterized commands. Fully injectable at runtime by the motion agent.