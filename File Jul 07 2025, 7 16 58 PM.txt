ğŸ§ª Sanity Test Workflow â€“ cncpick2

This document describes the structured step-by-step process followed during a sanity test of the cncpick2 pick-and-place system.

â¸»

ğŸ¯ Purpose
	â€¢	Ensure all agents are initialized correctly
	â€¢	Validate inter-agent communication
	â€¢	Detect incorrect agent roles, logic, or misrouting
	â€¢	Catch early development regressions

â¸»

âœ… Step-by-Step Logic Flow

1. Spawn Object
	â€¢	Simulator emits object_spawned event
	â€¢	Logged and verified by data_logging_agent
	â€¢	Checked: agent = simulator_agent

2. Detect Object
	â€¢	vision_agent captures RGB + depth
	â€¢	Simulates YOLO detection
	â€¢	Computes:
	â€¢	Classification (color)
	â€¢	Lane from pixel coordinates
	â€¢	Area estimate
	â€¢	Height from depth map
	â€¢	Emits object_detected event

3. Score + Assign Object
	â€¢	scoring_agent receives object metadata
	â€¢	Assigns to best available CNC
	â€¢	Emits object_assigned event with assigned_to

4. Move + Wait for Trigger
	â€¢	motion_agent moves to pickup lane
	â€¢	Requests pickup approval from trigger_agent
	â€¢	Waits for matching object to arrive in zone

5. Trigger Confirms Match
	â€¢	trigger_agent validates object:
	â€¢	Lane match
	â€¢	Area within tolerance
	â€¢	Emits pickup_confirmed event

6. Pickup Executed
	â€¢	motion_agent runs G-code sequence
	â€¢	Vacuum activated via G-code
	â€¢	Object lifted, transported to drop bin
	â€¢	Emits object_picked event

7. Drop Complete
	â€¢	Drop bin position reached
	â€¢	Vacuum disabled via G-code
	â€¢	object_dropped event emitted
	â€¢	Arm returns to center

â¸»

ğŸ” Assertions Used

See assert_helpers.py for:
	â€¢	Role verification
	â€¢	Event ordering
	â€¢	Data integrity (height, assigned_to, etc)

â¸»

ğŸ“Œ Summary

The sanity test ensures all critical system paths and agent responsibilities are working in harmony. Itâ€™s the foundational test for development, CI, and pre-release validation.