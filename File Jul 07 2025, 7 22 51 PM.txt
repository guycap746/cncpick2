ğŸ”„ Recovery Agent Design â€“ cncpick2

This document outlines the optional recovery_agent, responsible for initiating recovery procedures after faults, halts, or manual override events.

â¸»

ğŸ¯ Purpose
	â€¢	Restart agent tasks after a safety halt or fault
	â€¢	Attempt to restore in-progress operations
	â€¢	Reset system to a known good state after error

â¸»

ğŸ“¥ Inputs
	â€¢	halt_all from safety_agent
	â€¢	manual_recover from CLI tools
	â€¢	Cached state files from agents (if enabled)

â¸»

ğŸ” Recovery Actions

Target Agent	Recovery Behavior
motion_agent	Move to ready_position, clear G-code queue
scoring_agent	Reload object list from cache
trigger_agent	Reset trigger detection buffers
vision_agent	Resync camera feed + detection stream


â¸»

ğŸ§  Logic Flow
	1.	Detect recovery trigger
	2.	Load /state/* cache files (if available)
	3.	Validate timestamps for consistency
	4.	Issue resume_from_recovery events:

{
  "event": "resume_from_recovery",
  "agent": "recovery_agent",
  "target": "motion_agent",
  "timestamp": 1234567890.0
}


â¸»

ğŸ” Safeguards
	â€¢	Will not activate if GRBL still offline
	â€¢	Requires safety_agent clearance (no active fault)
	â€¢	Agents must log recovered = true on success

â¸»

ğŸ§ª Simulation Mode
	â€¢	Used in chaos testing to re-enable flow after injected faults
	â€¢	Tracks number of successful recoveries per session

â¸»

ğŸ“Œ Summary

The recovery_agent is a future-proofing module for safely resuming operation after interruptions. It supports full or partial recovery, enabling long simulation runs, hardware uptime, and fault injection stress tests.