ğŸ› ï¸ cncpick2 Development Plan (Phase 1â€“5)

This plan outlines the staged development of the cncpick2 system from simulation to real hardware integration, based on your finalized logic map and document set.

â¸»

âœ… PHASE 1: Code Skeleton Setup

ğŸ¯ Goal: Initialize base system with agent stubs, ZeroMQ config, message schema, and test harness.

Tasks:
	â€¢	Setup src/agents/, src/core/, src/tests/, and config/ structure
	â€¢	Create base AgentSocket or ZMQAgent class
	â€¢	Define global message schema with required fields
	â€¢	Implement test_runner.py with profile-based launcher
	â€¢	Wire up assert_helpers.py and data logger stubs

â¸»

âœ… PHASE 2: Agent-by-Agent Development (Sim Mode)

ğŸ¯ Goal: Implement each core agent as a testable unit using simulated input.

Agents to implement:
	â€¢	simulator_agent: Emits object_spawned
	â€¢	vision_agent: Simulates YOLO + RGB/depth feed
	â€¢	scoring_agent: Assigns best object to picker
	â€¢	motion_agent_X: Executes simulated pickup sequence
	â€¢	trigger_agent: Watches for object arrival
	â€¢	data_logging_agent: Captures full event log

Deliverables:
	â€¢	Stubs responding to events
	â€¢	Hooked into test_runner
	â€¢	Message tracing working end-to-end

â¸»

âœ… PHASE 3: Full Lifecycle Flow

ğŸ¯ Goal: Validate object lifecycle from spawn to drop using only simulation components.

Flow:
	1.	Sim spawns object
	2.	Vision detects + emits
	3.	Scoring assigns
	4.	Motion plans + requests trigger
	5.	Trigger confirms pickup zone
	6.	Motion executes pickup + drop

Validations:
	â€¢	object_spawned, object_detected, object_assigned, object_ready_for_pickup, object_picked, object_dropped, motion_ready
	â€¢	All events logged by data_logging_agent
	â€¢	Assertions pass at each stage

â¸»

âœ… PHASE 4: Multi-Lane & Post-Pick Tracking

ğŸ¯ Goal: Handle 4 lanes and start error detection feedback loop.

Enhancements:
	â€¢	Run multi-object stream across 4 simulated lanes
	â€¢	Refine lane_mapper accuracy
	â€¢	Implement post_pick_monitor_agent
	â€¢	Detect objects that passed pickup zone
	â€¢	Recheck YOLO detections

Deliverables:
	â€¢	Missed pickup detection
	â€¢	Multi-agent lane handling
	â€¢	Object queue pruning + timeouts

â¸»

âœ… PHASE 5: Hardware Integration Mode

ğŸ¯ Goal: Enable GRBL CNC and live camera feeds.

Changes:
	â€¢	Use profile: hardware_grbl.yaml
	â€¢	Swap:
	â€¢	simulator_agent â†’ disabled
	â€¢	vision_agent â†’ uses OAK-D RGBD stream
	â€¢	motion_agent â†’ talks to physical GRBL
	â€¢	trigger_agent â†’ live zone detection from second cam

Keep:
	â€¢	data_logging_agent, post_pick_monitor_agent, test_runner

â¸»

âœ… Priority Order for Development

Priority	Component	Notes
1	simulator_agent	Drives system
2	vision_agent	Enables detection pipeline
3	scoring_agent	Core assignment logic
4	motion_agent (sim)	Runs pickup motion + drop
5	trigger_agent	Pickup validation handoff
6	data_logging_agent	Debug + audit
7	grbl_driver_agent (sim)	Simulates CNC response
8	post_pick_monitor_agent	Feedback loop, optional for Phase 4


â¸»

Ready to begin Phase 1 or generate your folder and file templates?