ğŸ¤– Multi-CNC Coordination Strategy â€“ cncpick2

This document outlines the strategy for supporting multiple coordinated CNC picker arms running in parallel on the same conveyor.

â¸»

ğŸ¯ Purpose
	â€¢	Scale system throughput with up to 4 CNC arms
	â€¢	Assign pick targets efficiently without conflict
	â€¢	Preserve modular agent logic while coordinating globally

â¸»

ğŸ“ Architecture Overview

Component	Role
scoring_agent	Assigns objects to specific CNC units
motion_agent_N	One per CNC arm (e.g., motion_agent_2)
trigger_agent_N	One per CNC pickup camera zone
vision_agent	Sees all objects, labels lane and size


â¸»

ğŸ§  Coordination Logic
	1.	Vision detects object and sends info to scoring_agent
	2.	Scoring ranks all known CNC units:
	â€¢	Lane proximity
	â€¢	Time since last pickup
	â€¢	Queue length / availability
	3.	Selected CNC ID is included in object_assigned event

{
  "event": "object_assigned",
  "assigned_to": "motion_agent_2",
  "object_id": "abc123",
  "lane": 3
}

	4.	Only assigned motion_agent will act
	5.	trigger_agent_X watches its zone and notifies its CNC agent when match arrives

â¸»

ğŸ” Load Balancing Strategy
	â€¢	First-fit + round-robin hybrid
	â€¢	Idle CNC gets highest priority
	â€¢	Agents keep local assignment buffers of 1â€“2 items max

â¸»

ğŸ“¦ Message Routing
	â€¢	All agents subscribe to shared PUB/SUB channel
	â€¢	Messages are filtered by assigned_to field
	â€¢	ZMQ filtering keeps overhead low

â¸»

ğŸ§ª Test Modes
	â€¢	Simulate 2â€“4 parallel CNC units
	â€¢	Visual overlay shows pickups by agent
	â€¢	metrics_agent splits KPIs by motion agent name

â¸»

ğŸ“Œ Summary

This strategy enables fully decentralized coordination between multiple CNC arms, with lightweight arbitration via the scoring agent and clearly isolated agent roles. It scales easily and supports future performance optimization.