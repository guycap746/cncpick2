ğŸ¨ Simulator Visual Overlay Planning â€“ cncpick2

This document outlines the planned features for visual debugging and playback of simulation scenarios, helping developers understand agent logic through overlaid imagery.

â¸»

ğŸ¯ Purpose
	â€¢	Provide a visual inspection tool for simulation runs
	â€¢	Render what the vision agent â€œsawâ€
	â€¢	Show real-time overlays of object IDs, lanes, triggers, and pickups

â¸»

ğŸ–¼ï¸ Output Mode
	â€¢	Generates annotated frames as:
	â€¢	PNG sequence: /overlay_frames/frame_000123.png
	â€¢	Optional: Live window display (OpenCV)
	â€¢	Final export:
	â€¢	video.mp4 via ffmpeg

â¸»

ğŸ§  Rendered Overlays

Layer	Data Source
Bounding Boxes	vision_agent
Object IDs	scoring_agent
Lane Zones	lane_mapper config
Trigger Events	trigger_agent logs
Pickup Markers	motion_agent
Missed Objects	post_pick_monitor


â¸»

ğŸ› ï¸ Tools
	â€¢	OpenCV + matplotlib for rendering
	â€¢	Color-coded per lane or outcome
	â€¢	Legend overlay for interpretation

â¸»

ğŸ”„ Synchronization
	â€¢	Matches logs to camera timestamps
	â€¢	Frame rendering queue reads from data_logging_agent
	â€¢	All overlays must respect the frameâ€™s simulated timestamp

â¸»

ğŸ“¦ File Layout

/sim_vis/
  â”œâ”€â”€ frames/
  â”œâ”€â”€ overlays/
  â”œâ”€â”€ exports/
  â””â”€â”€ logs/


â¸»

ğŸ“Œ Summary

The visual overlay system provides a powerful tool for verifying simulation correctness, debugging lane and scoring logic, and creating reproducible test visualizations for future comparison or stakeholder demos.