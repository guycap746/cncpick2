ğŸš€ System Boot Sequence â€“ cncpick2

This document outlines the standard startup order and dependencies for agents in the cncpick2 project.

â¸»

ğŸ§  Overview

The system is designed to initialize in a loosely-coupled, fault-tolerant manner. Agents use pub/sub and internal queues, allowing startup in any order once dependencies are met.

â¸»

ğŸ” Suggested Boot Order

1. data_logging_agent
	â€¢	Must start first to capture all subsequent events

2. simulator_agent (if sim mode)
	â€¢	Begins object spawning
	â€¢	Also sends sim_done at test completion

3. vision_agent
	â€¢	Needs camera feed (simulated or real)
	â€¢	Must start before detections can occur

4. scoring_agent
	â€¢	Waits for detections and agent ready signals

5. motion_agent_N
	â€¢	Initializes motion controller or simulated GRBL driver
	â€¢	Sends motion_agent_ready when idle

6. trigger_agent_N
	â€¢	Awaits lane-specific monitor_object calls

7. (Optional) post_pick_monitor_agent
	â€¢	Observes missed objects

8. (Optional) metrics_agent, recovery_agent, safety_agent
	â€¢	Subscribe to existing message bus events
	â€¢	Can be safely started late

â¸»

âš™ï¸ Environment Detection

Each agent reads from shared config:

system:
  sim_mode: true

Agents adapt based on sim_mode, using mock hardware or simulated input streams.

â¸»

ğŸ•“ Timing Dependencies
	â€¢	Motion agent must not block waiting for vision to assign
	â€¢	Vision must wait for camera readiness
	â€¢	Logging should never be skipped

â¸»

âœ… Startup Checklist
	â€¢	sim_mode properly configured in config
	â€¢	Logging agent confirmed running
	â€¢	Motion agents return motion_agent_ready
	â€¢	Spawn events observed within 2s of simulator launch
	â€¢	Vision detects and publishes object_detected

â¸»

ğŸ“Œ Summary
	â€¢	System is modular and resilient to partial startup
	â€¢	Recommended order enhances debuggability
	â€¢	Simulation-compatible from day one