â™»ï¸ Agent State Caching & Resumption â€“ cncpick2

This document defines optional runtime persistence strategies that allow agents to resume operations after crash, restart, or pause.

â¸»

ğŸ¯ Purpose
	â€¢	Enable resuming long simulation runs
	â€¢	Allow partial recovery in hardware mode
	â€¢	Avoid losing pick assignments, object metadata, and G-code queues

â¸»

ğŸ§± Per-Agent Caching Strategies

motion_agent
	â€¢	Store last known ready_position
	â€¢	Save current G-code queue (line buffer)
	â€¢	Resume from start of pickup if mid-routine crash

scoring_agent
	â€¢	Cache list of active, unassigned objects
	â€¢	Record assigned object IDs and their motion targets
	â€¢	Reassign if pickup_timeout occurs after restart

vision_agent
	â€¢	Syncs to camera feed on restart
	â€¢	Reprocesses any objects that were visible at last timestamp

simulator_agent
	â€¢	Rereads scenario file and fast-forwards to current time
	â€¢	Optional: checksum last emitted object to avoid dupes

trigger_agent
	â€¢	Cache recent object seen in trigger zone (lane â†’ timestamp â†’ id)

â¸»

ğŸ’¾ Persistence Format
	â€¢	JSON snapshot every 2â€“5 seconds per agent
	â€¢	Default location: /state/{agent_name}_state.json

â¸»

ğŸ”„ Startup Behavior
	â€¢	If state file exists, agent loads it
	â€¢	Logs resumed_from_state = true
	â€¢	Otherwise, starts fresh

â¸»

ğŸ“Œ Summary

This design enables robust partial recovery and continuity for both simulation and real deployments. It ensures agents retain critical knowledge between runs and during unexpected crashes without requiring a centralized database.