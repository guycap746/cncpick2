ğŸ§­ Lane Mapping Strategy â€“ cncpick2

This document details how the system determines which lane an object is in from image data, and how that maps to CNC motion plans.

â¸»

ğŸ¯ Purpose
	â€¢	Convert image-space positions into physical CNC-aligned lane indices
	â€¢	Ensure synchronized motion planning between vision and motion agents

â¸»

ğŸ§  Vision Agent Role
	â€¢	Captures RGB image and depth
	â€¢	Uses detection pixel coordinates (bounding box or center)
	â€¢	Translates horizontal pixel position â†’ lane index
	â€¢	Emits object_detected with lane assignment (e.g., lane: 2)

â¸»

ğŸ§° Lane Definition Options
	1.	Static Mapping (config-based)
	â€¢	Define pixel ranges per lane in config:

lane_map:
  0: [0, 160]
  1: [161, 320]
  2: [321, 480]
  3: [481, 640]


	2.	Dynamic Mapping (calibration-based)
	â€¢	Camera calibration aligns image plane to CNC coordinate system
	â€¢	Lane zones projected from physical positions to image bounds
	â€¢	Auto-tuned via test grid pattern or lane markings

â¸»

ğŸ” Runtime Behavior
	â€¢	Lane assignments are used by:
	â€¢	scoring_agent to queue objects by lane
	â€¢	motion_agent to align pickup to lane offset
	â€¢	trigger_agent to filter by expected lane

â¸»

ğŸ§ª Testing & Visualization
	â€¢	Optional debug overlays
	â€¢	Static test frames for calibration tuning
	â€¢	Scenario validation in simulation_scenario_builder

â¸»

ğŸ“Œ Summary

Lane mapping connects computer vision detection to physical actuation. Itâ€™s foundational for coordination between vision, scoring, trigger, and motion logic in cncpick2.