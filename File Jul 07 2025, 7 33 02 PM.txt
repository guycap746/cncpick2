ğŸ§® Agent Profile: scoring_agent â€“ cncpick2

This document defines the behavior, inputs, and output logic of the scoring_agent, which ranks objects and assigns them to motion agents.

â¸»

ğŸ§  Agent Overview
	â€¢	Maintains a queue of detected, unassigned objects
	â€¢	Scores objects based on area, confidence, and position
	â€¢	Assigns best objects to available motion agents
	â€¢	Notified when motion agent becomes ready

â¸»

ğŸ“‚ Responsibilities
	1.	Subscribe to object_detected from vision_agent
	2.	Track object status and metadata
	3.	Subscribe to motion_agent_ready from each motion agent
	4.	Assign objects to idle motion agents
	5.	Publish object_assigned events

â¸»

ğŸ“¥ Subscribed Events

object_detected

From: vision_agent
	â€¢	Adds object to internal queue
	â€¢	Marks as unassigned

motion_agent_ready

From: any motion_agent
	â€¢	Triggers assignment logic

â¸»

ğŸ“¤ Published Events

object_assigned

{
  "event": "object_assigned",
  "agent": "scoring_agent",
  "timestamp": "...",
  "payload": {
    "object_id": "uuid",
    "assigned_to": "motion_agent_2"
  }
}


â¸»

âš–ï¸ Scoring Logic

Criteria
	â€¢	Larger area is better (proxy for easier pickup)
	â€¢	Higher confidence (if available)
	â€¢	Less crowded (future enhancement)

Output
	â€¢	Chooses best-fit unassigned object for requesting lane
	â€¢	Avoids assigning multiple agents to same object

â¸»

ğŸ” Internal Object State

Each object in the scoring pool stores:

{
  "object_id": "uuid",
  "lane": 2,
  "area_px": 3033,
  "height_mm": 29.8,
  "assigned": false
}


â¸»

ğŸ” Lifecycle
	1.	Object detected â†’ stored
	2.	Motion agent ready â†’ finds match
	3.	Publishes assignment â†’ updates internal status
	4.	Motion agent completes â†’ resets ready state

â¸»

ğŸ”§ Configuration Options

scoring_agent:
  scoring_method: "area"
  max_objects: 50
  assignment_strategy: "per_lane"


â¸»

ğŸ§ª Sanity Test Expectations
	â€¢	Each detected object must be assigned once
	â€¢	No double-assignments
	â€¢	Assignment must occur after motion agent ready

â¸»

ğŸ“Œ Summary
	â€¢	Coordinates flow between vision detection and physical motion
	â€¢	Ensures agents only act on valid, pickable objects
	â€¢	Centralizes decision logic for deterministic and testable behavior